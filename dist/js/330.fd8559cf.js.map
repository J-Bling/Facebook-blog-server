{"version":3,"file":"js/330.fd8559cf.js","mappings":"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","sources":["webpack://simple_blog/./src/store/useUrl.js","webpack://simple_blog/./src/page/ChatGpt.vue","webpack://simple_blog/./src/page/ChatGpt.vue?50d6","webpack://simple_blog/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://simple_blog/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://simple_blog/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://simple_blog/./node_modules/@babel/runtime/helpers/esm/defineProperty.js"],"sourcesContent":["import { defineStore } from \"pinia\";\n\nexport const useUrl=defineStore('urls',{\n    state:()=>{\n        return {\n            login:\"user/login\",\n            register:\"user/register\",\n            send_code:\"user/send-code\",\n            postsList:\"post/postsList\",\n            postDetail:\"post/postDetail\",\n            userPosts:\"post/userPosts\",\n            MyAuthorPost:\"post/my-post\",\n            deletePost:\"post/delete\",\n            create_post:\"post/create-post\",\n            updatePost:\"post/update\",\n            comment_list:\"comment/comment-list\",\n            create_comment:\"comment/create_comment\",\n            ai_kimi:\"ai/kimi\",\n            ai_kimi_:\"ai/kimi_\",\n            ai_qianwen:'ai/qianwen',\n            my_comments:\"comment/my-comments\",\n            deleteComments:\"comment/deleteComments\",\n            create_commentComments:\"comment/create-commentComments\",\n            comment_agree:\"comment/comment_agree\",\n            user:\"users/user\",\n            athor:\"users/Athor\",\n            send_friend_app:\"users/send-app\",\n            agree_friend_app:\"users/agree-app\",\n            get_friend_app:\"users/FriendsApp\",\n            get_friends_list:\"users/get-FriendsList\",\n            FriendsDynamic:\"users/FriendsDynamic\",\n            deleteFriend:\"users/delete-friend\",\n            HistoryMessage:\"users/HistoryMessage\",\n            weather:\"weather/test\",\n            views:\"count/views\"\n        }\n    }\n});","<template>\n    <div class=\"chat-main-page\">\n        <div class=\"floating-button\" @click=\"isKimi=!isKimi\" :class=\"[isKimi ? 'Comment_' : 'Super_']\"> \n            {{ isKimi ? \"普通\" : \"超级\" }}模式\n        </div>\n        <el-container class=\"content-main\">\n            <el-scrollbar ref=\"scrollbarRef\" wrap-class=\"scrollbar-wrapper\" class=\"chat-main-div\">\n                <div class=\"content\" v-for=\"(Message, index) in MessageQueues\" :key=\"index\">\n                    <div class=\"chat-div\" v-for=\"(content, idx) in Message\" :key=\"idx\">\n                        <el-card class=\"chat-card\" :class=\"{ 'ai': content.user === 'ai', 'user': content.user === 'user' }\">\n                            <template #header>\n                                <span>\n                                    <img :src=\"content.user === 'user' ? userImage : aiImage\" class=\"image\" \n                                    :class=\"content.user === 'user' ? 'userImage':'aiImage'\">\n                                </span>\n                            </template>\n                            <div class=\"message\" :class=\"content.user === 'user'?'userMessage':'aiMessage'\"\n                             v-if=\"typeof(content.message)==='string'\">\n                                <pre>{{ content.message }}</pre>\n                            </div>\n                            <div class=\"message aiMessage\"  v-else>\n                                <p v-for=\"(message, msgIdx) in content.message.links\" :key=\"msgIdx\">\n                                    <img :src=\"message.logo\" class=\"logo\" width=\"20px\">\n                                    <a :href=\"message.url\" class=\"url-title\">{{ message.title }}</a>\n                                </p>\n                            </div>\n                        </el-card>\n                    </div>\n                </div>\n                <div class=\"content\" v-if=\"TemporaryQueues.length>0\">\n                    <el-card class=\"chat-card user\">\n                        <template #header>\n                            <span>\n                                <img :src=\"userImage\" class=\"userImage image\">\n                            </span>\n                        </template>\n                        <div class=\"message userMessage\">\n                            <pre>{{ TemporaryQueues[0].message }}</pre>\n                        </div>\n                    </el-card>\n                    <el-card class=\"chat-card ai\" v-if=\"streamData\">\n                        <template #header>\n                            <span>\n                                <img :src=\"aiImage\" class=\"image aiImage\">\n                            </span>\n                        </template>\n                        <div class=\"message aiMessage\">\n                            <pre>{{ streamData }}</pre>\n                        </div>\n                    </el-card>\n                </div>\n            </el-scrollbar>\n        </el-container>\n        <el-footer class=\"input\">\n            <form @submit.prevent=\"handleSubmit\" class=\"message-form\">\n                <el-input \n                class=\"user-input\"\n                type=\"textarea\"\n                v-model=\"UserContent\"\n                placeholder=\"请输入内容\"\n                autosize\n                :minrows=\"3\"\n                :maxrows=\"10\"\n                style=\"flex-grow: 1; margin-right: 8px;\"\n                @keyup.enter=\"handleEnter\"\n                ></el-input>\n                <el-button \n                class=\"user-button\" \n                type=\"primary\" \n                native-type=\"submit\" \n                :disabled=\"isSending || !UserContent.length\"\n                :style=\"{ backgroundColor: isSending || !UserContent ? '#cccccc' : '#409EFF', color: '#ffffff' }\"\n                >\n                发送\n                </el-button>\n            </form>\n        </el-footer>\n    </div>\n</template>\n<style scoped>\n.chat-main-page {\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    overflow: hidden;\n}\n\n.floating-button {\n    position: fixed;\n    bottom: 15%;\n    right: 20px;\n    padding: 10px 20px;\n    border-radius: 25px;\n    cursor: pointer;\n    z-index: 10;\n    background-color: #409eff;\n    color: white;\n    transition: all 0.3s ease;\n}\n\n.Super_ {\n    background-color: #67c23a;\n}\n\n.content-main {\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: auto;\n    padding-bottom: 60px;\n    bottom: 10%;\n}\n\n.scrollbar-wrapper {\n    width: 100%;\n    max-height: 100%;\n}\n\n.chat-main-div {\n    flex-grow: 1;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n}\n\n.chat-card {\n    margin-bottom: 16px;\n    border-radius: 12px;\n    max-width: 70%;\n    animation: fadeIn 0.3s ease-in-out;\n    flex-shrink: 0; \n}\n\n@keyframes fadeIn {\n    from { opacity: 0; transform: translateY(10px); }\n    to { opacity: 1; transform: translateY(0); }\n}\n\n.ai {\n    margin-right: auto;\n    background-color: #f0f9eb;\n    align-self: flex-start;\n}\n\n.user {\n    margin-left: auto;\n    background-color: #e6f7ff;\n    align-self: flex-end;\n}\n\n.image {\n    width: 32px;\n    height: 32px;\n    border-radius: 50%;\n    vertical-align: middle;\n}\n.userImage {\n    float: right;\n}\n.aiImage {\n    float: left;\n}\n.message {\n    word-break: break-word;\n    padding: 16px;\n    border-radius: 12px;\n    white-space: pre-wrap;\n    overflow-wrap: break-word;\n    transition: max-height 0.3s wase-out;\n}\npre{\n    overflow: auto;\n    min-height: 15px;\n    font-size: 16px; \n    font-weight: bold;\n    transition: max-height 0.3s ease-out;\n}\n.userMessage {\n    text-align: right;\n}\n.userMessage pre{\n    text-align: left;\n}\n.aiMessage {\n    text-align: left;\n}\n.url-title {\n    color: #409eff;\n    text-decoration: none;\n}\n\n.input {\n    position: fixed;\n    bottom: 5%;\n    left: 0;\n    right: 0;\n    display: flex;\n    justify-content: space-between;\n    box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.1);\n    background-color: white;\n    z-index: 10;\n    transition: bottom 0.3s ease-out;\n    max-height: 200px;\n    overflow-y: hidden;\n}\n.message-form {\n  display: flex;\n  padding: 10px;\n  border-top: 1px solid #ddd;\n  background-color: #fff;\n  box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);\n  width: 100%;\n}\n.user-input {\n    flex-grow: 1;\n    margin-right: 8px;\n    resize: none;\n    max-height: 100%;\n    overflow-y: auto;\n    transition: max-height 0.3s ease-out;\n}\n\n.user-button {\n    background-color: #409EFF;\n    color: white;\n    border: none;\n    padding: 10px 20px;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.3s;\n}\n\n.user-button:disabled {\n    background-color: #cccccc;\n    cursor: not-allowed;\n}\n\n.user-button:hover:not(:disabled) {\n    background-color: #3a8ee6;\n}\n</style>\n<script>\nimport {ref,onMounted,nextTick} from 'vue';\nimport { useUrl } from '@/store/useUrl';\nimport { notice } from '@/components/notice';\nimport { useUser } from '@/store/useUser';\nexport default {\n\n    setup(){\n        const urls =useUrl();\n        const user=useUser();\n        const aiImage='https://tse4-mm.cn.bing.net/th/id/OIP-C.j8q9H_Obm-af9tFzui7LdAHaHV?rs=1&pid=ImgDetMain';\n        const userImage=user.user_data.image || 'https://tse3-mm.cn.bing.net/th/id/OIP-C.HXHAQvjrX1gCRlcANzmqPgAAAA?rs=1&pid=ImgDetMain';\n        const BaseUrl=process.env.VUE_APP_API_URL;\n\n        const MessageQueues=ref([]);\n        const TemporaryQueues=ref([]);\n        const UserContent=ref(\"\");\n        const streamData=ref(\"\");\n        const isKimi=ref(true);\n        const isSending=ref(false);\n\n        const scrollbarRef=ref(null);\n        function scrollToBottom() {\n            nextTick(() => {\n                const scrollbar = scrollbarRef.value;\n                if (scrollbar && scrollbar.$el && scrollbar.$el.querySelector && scrollbar.$el.querySelector('.scrollbar-wrapper')) {\n                    const wrapper = scrollbar.$el.querySelector('.scrollbar-wrapper');\n                    wrapper.scrollTop = wrapper.scrollHeight;\n                } else {\n                    console.log('scrollbarRef is undefined or .wrap is undefined');\n                }\n            });\n        }\n\n        const talking=()=>{\n            const user_content=UserContent.value.slice();\n                const QueuesData={\n                    user:\"user\",\n                    message:user_content\n                }\n            addTemporaryQueues(QueuesData);\n            UserContent.value=\"\";\n            nextTick(scrollToBottom());\n        }\n\n        const addTemporaryQueues=(data)=>{\n            TemporaryQueues.value.push(data);\n        }\n\n        const addMessageQueues=()=>{\n            MessageQueues.value.push(TemporaryQueues.value);\n            TemporaryQueues.value=[];\n            streamData.value='';\n            nextTick(scrollToBottom());\n        }\n\n\n        function handleEnter(event) {\n            if (event.shiftKey) {\n                insertNewLine();\n            } else {\n                if(!isSending.value &&removeExtraSpaces(UserContent.value)){\n                    send();\n                }else{\n                    insertNewLine();\n                }\n            }\n\n            function insertNewLine() {\n                const start = UserContent.value.indexOf('\\n', UserContent.value.length - 1);\n                const text = UserContent.value.slice(0, start) + '\\n' + UserContent.value.slice(start + 1);\n                UserContent.value = text;\n            }\n        }\n\n        function removeExtraSpaces(str) {\n            return str.trim().replace(/\\s+/g, ' ');\n        }\n        \n        function jsonParse(content){\n            try{\n                const jsonObject=JSON.parse(content);\n                return jsonObject.text;\n            }catch(error){\n                return null;\n            }\n        }\n\n        function getText(content){\n            try{    \n                const jsonObject=JSON.parse(content);\n                return jsonObject.contents.pop().content;\n            }catch(error){\n                return null;\n            }\n        }\n\n        class ChatGPT{\n            constructor(){\n\n            }\n            spider_kimi=async (url,content)=>{\n                try{\n                    const response =await fetch(url,{\n                        method:\"POST\",\n                        headers:{\n                            'Content-Type': 'application/json'\n                        },\n                        body:JSON.stringify({content:content})\n                    });\n\n                    if(!response.ok)\n                        return null;\n\n                    const reader = response.body.getReader();\n                    const decoder = new TextDecoder('utf-8');\n\n                    let loading=true;\n                    while(loading){\n                        const {done,value} =await reader.read();\n                        if(done) break;\n                        const text= decoder.decode(value,{stream:true}).split(\"data: \");\n\n                        for(let Str of text){\n                            if(Str){\n                                const str=jsonParse(Str);\n                                if(str){\n                                    if(str==='Kimi助手功能介绍') continue;\n                                    streamData.value+=str;\n                                    nextTick(scrollToBottom());\n                                }\n                            }\n                        }\n                    }\n                    reader.releaseLock();\n                    return streamData.value;\n\n                }catch(error){\n                    console.log(\"error\",error);\n                    return null;\n                }\n            }\n\n            kimi=async (content)=>{\n                talking();\n                const url=BaseUrl+urls.ai_kimi_;\n                try{\n                    const data = await this.spider_kimi(url,content);\n                    var aiMessage;\n                    if(data){\n                        aiMessage={\n                            user:\"ai\",\n                            message:data.slice()\n                        }\n                    }else{\n                        aiMessage={\n                            user:\"ai\",\n                            message:\"刚刚网络出错误,请重新连接 (｡ì _ í｡)\"\n                        }\n                    }\n                    addTemporaryQueues(aiMessage);\n                    addMessageQueues();\n\n                }catch(error){\n                    console.log(\"error\",error);\n                    notice(\"网络出错\",\"\");\n                }\n            }\n\n            spider_qianwen=async (url,content)=>{\n                try{\n                    const response =await fetch(url,{\n                        method:\"POST\",\n                        body:JSON.stringify({content:content}),\n                        headers:{\n                            'Content-Type': 'application/json'\n                        },\n                    });\n\n                    if(!response) return null;\n\n                    const reader = response.body.getReader();\n                    const decoder = new TextDecoder('utf-8');\n\n                    for(;;){\n                        const {done,value} =await reader.read();\n                        if(done) break;\n                        const text=decoder.decode(value,{stream:true});\n                        if(text){\n                            const strs=text.split(\"data: \");\n                            for(let str of strs){\n                                if(str){\n                                    const newText=getText(str);\n                                    if(newText) {\n                                        streamData.value=newText;\n                                        nextTick(scrollToBottom());\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    reader.releaseLock();\n                    return json_(streamData.value);\n                }catch(error){\n                    console.log(\"fetch_error :\",error);\n                    return null;\n                }\n            }\n\n            qianwen=async (content)=>{\n                const url=BaseUrl+urls.ai_qianwen;\n                talking()\n                try{\n                    const data=await this.spider_qianwen(url,content);\n                    var aiMessage;\n                    if(data){\n                        aiMessage={\n                            user:\"ai\",\n                            message:data\n                        }\n                    }else{\n                        aiMessage={\n                            user:\"ai\",\n                            message:\"刚刚网络出错误,请重新连接 (｡ì _ í｡)\"\n                        }\n                    }\n                    addTemporaryQueues(aiMessage);\n                    addMessageQueues();\n\n                }catch(error){\n                    console.log(\"error\",error);\n                    notice(\"网络出错\",\"\");\n                }\n            }\n        }\n\n        const json_=(content)=>{\n            try{\n                const JsonObject=JSON.parse(content);\n                return JsonObject;\n            }catch(error){\n                return content;\n            }\n        }\n\n        const send =async ()=>{\n            try{\n                const question=removeExtraSpaces(UserContent.value);\n                if(!question){\n                    notice(\"不能发生空内容\",\"\",1500);\n                    return null;\n                }\n\n                isSending.value=true;\n                const AI=new ChatGPT();\n                isKimi.value ? await AI.kimi(question) : await AI.qianwen(question);\n\n            }catch(error){\n                console.log(\"error\",error);\n                notice(\"出错了\",\"\",1500);\n            }finally{\n                isSending.value=false;\n                streamData.value='';\n            }         \n        }\n\n        onMounted(function(){\n            MessageQueues.value.push([{\n                user:\"ai\",\n                message:\"^-^ :你好请问有什么可以帮到你\"\n            }]);\n            scrollToBottom();\n        });\n\n\n        return {\n            handleEnter,\n            streamData,\n            isKimi,\n            MessageQueues,\n            TemporaryQueues,\n            UserContent,\n            send,\n            aiImage,\n            userImage,\n            isSending,\n            scrollbarRef,\n        }\n    }\n}\n</script>","import { render } from \"./ChatGpt.vue?vue&type=template&id=4e0f51c9&scoped=true\"\nimport script from \"./ChatGpt.vue?vue&type=script&lang=js\"\nexport * from \"./ChatGpt.vue?vue&type=script&lang=js\"\n\nimport \"./ChatGpt.vue?vue&type=style&index=0&id=4e0f51c9&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4e0f51c9\"]])\n\nexport default __exports__","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };"],"names":["useUrl","defineStore","state","login","register","send_code","postsList","postDetail","userPosts","MyAuthorPost","deletePost","create_post","updatePost","comment_list","create_comment","ai_kimi","ai_kimi_","ai_qianwen","my_comments","deleteComments","create_commentComments","comment_agree","user","athor","send_friend_app","agree_friend_app","get_friend_app","get_friends_list","FriendsDynamic","deleteFriend","HistoryMessage","weather","views","class","key","_createElementBlock","_hoisted_1","_createElementVNode","_normalizeClass","$setup","isKimi","onClick","_cache","$event","_createVNode","_component_el_container","default","_withCtx","_component_el_scrollbar","ref","_Fragment","_renderList","MessageQueues","Message","index","content","idx","_component_el_card","header","src","userImage","aiImage","_hoisted_2","message","_toDisplayString","_hoisted_3","links","msgIdx","logo","width","_hoisted_4","href","url","title","_hoisted_5","_","TemporaryQueues","length","_hoisted_6","_hoisted_7","_hoisted_8","streamData","_createBlock","_hoisted_9","_hoisted_10","_createCommentVNode","_component_el_footer","onSubmit","_withModifiers","args","_ctx","handleSubmit","_component_el_input","type","modelValue","UserContent","placeholder","autosize","minrows","maxrows","style","onKeyup","_withKeys","handleEnter","_component_el_button","disabled","isSending","_normalizeStyle","backgroundColor","color","_createTextVNode","setup","urls","useUser","user_data","image","BaseUrl","process","scrollbarRef","scrollToBottom","nextTick","scrollbar","value","$el","querySelector","wrapper","scrollTop","scrollHeight","console","log","talking","user_content","slice","QueuesData","addTemporaryQueues","data","push","addMessageQueues","event","insertNewLine","start","indexOf","text","shiftKey","removeExtraSpaces","send","str","trim","replace","jsonParse","jsonObject","JSON","parse","error","getText","contents","pop","ChatGPT","constructor","_defineProperty","async","response","fetch","method","headers","body","stringify","ok","reader","getReader","decoder","TextDecoder","loading","done","read","decode","stream","split","Str","releaseLock","this","spider_kimi","aiMessage","notice","strs","newText","json_","spider_qianwen","JsonObject","question","AI","kimi","qianwen","onMounted","__exports__","render","_typeof","o","Symbol","iterator","prototype","toPrimitive","t","r","e","i","call","TypeError","String","Number","toPropertyKey","Object","defineProperty","enumerable","configurable","writable"],"sourceRoot":""}