"use strict";(self["webpackChunksimple_blog"]=self["webpackChunksimple_blog"]||[]).push([[977],{4977:function(e,a,l){l.r(a),l.d(a,{default:function(){return p}});var o=l(6768),r=l(4232);const s={class:"page"};function i(e,a,l,i,n,t){const u=(0,o.g2)("el-input"),d=(0,o.g2)("el-form-item"),m=(0,o.g2)("el-col"),g=(0,o.g2)("el-button"),c=(0,o.g2)("el-row"),p=(0,o.g2)("el-form"),f=(0,o.g2)("el-card");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(f,{class:"register-main"},{header:(0,o.k6)((()=>a[5]||(a[5]=[(0,o.Lk)("span",null,"注册",-1)]))),default:(0,o.k6)((()=>[(0,o.bF)(p,{model:i.information,rules:i.rules,ref:"registerForm","label-width":"100px",class:"demo-ruleForm"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{label:"用户名",prop:"username"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:i.information.username,"onUpdate:modelValue":a[0]||(a[0]=e=>i.information.username=e)},null,8,["modelValue"])])),_:1}),(0,o.bF)(d,{label:"邮箱",prop:"email"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:i.information.email,"onUpdate:modelValue":a[1]||(a[1]=e=>i.information.email=e),type:"email"},null,8,["modelValue"])])),_:1}),(0,o.bF)(d,{label:"密码",prop:"password1"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:i.information.password1,"onUpdate:modelValue":a[2]||(a[2]=e=>i.information.password1=e),type:"password"},null,8,["modelValue"])])),_:1}),(0,o.bF)(d,{label:"确认密码",prop:"password2"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:i.information.password2,"onUpdate:modelValue":a[3]||(a[3]=e=>i.information.password2=e),type:"password"},null,8,["modelValue"])])),_:1}),(0,o.bF)(d,{label:"验证码",prop:"code"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{gutter:10},{default:(0,o.k6)((()=>[(0,o.bF)(m,{span:16},{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:i.information.code,"onUpdate:modelValue":a[4]||(a[4]=e=>i.information.code=e)},null,8,["modelValue"])])),_:1}),(0,o.bF)(m,{span:8},{default:(0,o.k6)((()=>[(0,o.bF)(g,{onClick:i.send_code,disabled:i.information.isCode,loading:i.information.isCode},{default:(0,o.k6)((()=>[(0,o.eW)((0,r.v_)(i.information.codeMessage),1)])),_:1},8,["onClick","disabled","loading"])])),_:1})])),_:1})])),_:1}),(0,o.bF)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(g,{type:"primary",onClick:i.submitForm,loading:i.information.isSend},{default:(0,o.k6)((()=>[(0,o.eW)((0,r.v_)(i.information.registerMessage),1)])),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])}var n=l(144),t=l(1387),u=l(8153),d=l(7361),m={setup(){const e=(0,t.rd)(),a=(0,d.j)();let l;const r=(0,n.KR)({password1:"",password2:"",email:"",username:"",code:"",codeMessage:"发送验证码",registerMessage:"注册",isCode:!1,isSend:!1}),s=(0,n.KR)({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:7,max:11,message:"长度在 7 到 11 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],password1:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{8,16}$/,message:"密码必须为8到16位的字母或数字",trigger:"blur"}],password2:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:m,trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}),i=(0,n.KR)(null);function m(e,a,l){a!==r.value.password1?l(new Error("两次输入密码不一致")):l()}async function g(){if(!r.value.email||!f())return void c("无效email");r.value.codeMessage=120,r.value.isCode=!0;let e=a.send_code;const l=await(0,u.b)(e,{email:r.value.email});l?p(120):(c("发送失败"),r.value.isCode=!1)}function c(e="发送验证码"){r.value.codeMessage=e,setTimeout((()=>{r.value.isCode=!1,r.value.codeMessage="发送验证码"}),1500)}function p(e){r.value.codeMessage=e,l=setInterval((()=>{r.value.codeMessage>0?r.value.codeMessage--:(clearInterval(l),r.value.isCode=!1,r.value.codeMessage="发送验证码")}),1e3)}function f(){let e=/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[a-zA-Z0-9]{2,}$/;return r.value.email.match(e)}async function b(){const l=i.value;l&&await l.validate((async l=>{if(l){r.value.isSend=!0,r.value.registerMessage="正在注册";let l=a.register,o={password:r.value.password1,name:r.value.username,email:r.value.email,code:r.value.code};const s=await(0,u.b)(l,o);s?e.replace({path:"/Login"}):v("注册失败"),r.value.isSend=!1,r.value.registerMessage="注册"}else console.log("提交失败！")}))}function v(e="注册"){r.value.registerMessage=e}return(0,o.hi)((()=>{clearInterval(l)})),{information:r,rules:s,send_code:g,submitForm:b,registerForm:i}}},g=l(1241);const c=(0,g.A)(m,[["render",i],["__scopeId","data-v-63035464"]]);var p=c}}]);
//# sourceMappingURL=977.06068f70.js.map