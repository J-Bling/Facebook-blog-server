"use strict";(self["webpackChunksimple_blog"]=self["webpackChunksimple_blog"]||[]).push([[599],{5599:function(e,a,l){l.r(a),l.d(a,{default:function(){return f}});var t=l(6768),o=l(4232);const s={class:"page-main"},r={class:"register-link"};function u(e,a,l,u,i,n){const d=(0,t.g2)("el-input"),m=(0,t.g2)("el-form-item"),g=(0,t.g2)("el-button"),p=(0,t.g2)("el-form"),c=(0,t.g2)("router-link"),f=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",s,[(0,t.bF)(f,{class:"login-main"},{header:(0,t.k6)((()=>a[2]||(a[2]=[(0,t.Lk)("span",null,"登录",-1)]))),default:(0,t.k6)((()=>[(0,t.bF)(p,{model:u.data,rules:u.rules,ref:"loginForm","label-width":"80px"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{label:"邮箱",prop:"email"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:u.data.email,"onUpdate:modelValue":a[0]||(a[0]=e=>u.data.email=e),type:"email",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"密码",prop:"password"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:u.data.password,"onUpdate:modelValue":a[1]||(a[1]=e=>u.data.password=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(g,{type:"primary",onClick:u.submitForm,loading:u.data.isChange},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(u.data.message),1)])),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model","rules"]),(0,t.Lk)("div",r,[(0,t.bF)(c,{to:"/Register"},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)("还没有注册？点击注册")]))),_:1})])])),_:1})])}var i=l(144),n=l(8153),d=l(7361),m=l(4646),g={setup(){const e=(0,d.j)(),a=(0,i.KR)({email:"",password:"",message:"登录",isChange:!1}),l=(0,i.KR)({email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"长度至少为6个字符",trigger:"blur"}]}),t=(0,i.KR)(null),o=async()=>{if(!a.value.email||!a.value.password)return void(0,m.l)("请先输入信息","",2e3);a.value.isChange=!0;let l=e.login,t={email:a.value.email,password:a.value.password},o=await(0,n.b)(l,t);if(!o)return s("登录失败"),!1;{localStorage.setItem("token",o.token),localStorage.setItem("user_data",JSON.stringify(o.user_data));const e=localStorage.getItem("token");e||(console.log(2222),document.cookie=`token=${o.token};user_date=${JSON.stringify(o.user_data)};`),window.location.replace("/")}};function s(e){a.value.message=e,setTimeout((()=>{a.value.message="登录",a.value.isChange=!1}),1e3)}return{data:a,rules:l,loginForm:t,submitForm:o}}},p=l(1241);const c=(0,p.A)(g,[["render",u],["__scopeId","data-v-f91cebc4"]]);var f=c}}]);
//# sourceMappingURL=599.4ed1d751.js.map